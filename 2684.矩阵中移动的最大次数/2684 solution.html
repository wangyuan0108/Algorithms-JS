<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 方法一：广度优先搜索
      // 时间复杂度：O(mn)
      // 空间复杂度：O(n)
      var maxMoves = function (grid) {
        const m = grid.length,
          n = grid[0].length;
        let q = new Set();
        for (let i = 0; i < m; i++) {
          q.add(i);
        }
        for (let j = 1; j < n; j++) {
          const q2 = new Set();
          for (const i of q) {
            for (let i2 = i - 1; i2 <= i + 1; i2++) {
              if (0 <= i2 && i2 < m && grid[i][j - 1] < grid[i2][j]) {
                q2.add(i2);
              }
            }
          }
          q = q2;
          if (q.size === 0) {
            return j - 1;
          }
        }
        return n - 1;
      };

      // test
      let grid = [
        [2, 4, 3, 5],
        [5, 4, 9, 3],
        [3, 4, 2, 11],
        [10, 9, 13, 15],
      ];
      console.log(maxMoves(grid));
    </script>
  </body>
</html>
